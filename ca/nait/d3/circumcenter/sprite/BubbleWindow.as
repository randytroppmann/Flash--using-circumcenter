package ca.nait.d3.circumcenter.sprite{	import flash.display.MovieClip;	import flash.display.Shape;		public class BubbleWindow extends MovieClip{		protected var clipA:Shape;		protected var clipB:Shape;				protected var clipC:Shape;		protected var triangle:Shape;		protected var center:Shape;		private var centerline:Shape;				protected var _valueA:Number = 80;		protected var _valueB:Number = 101;		protected var _valueC:Number = 32;						public function BubbleWindow(){						clipA = new Shape();			clipA.graphics.beginFill(0x00ff00, 1);			clipA.graphics.drawCircle(0,0,2);						addChild(clipA);						clipB = new Shape();			clipB.graphics.beginFill(0x0ff000, 1);			clipB.graphics.drawCircle(0,0,2);						addChild(clipB);						clipC = new Shape();			clipC.graphics.beginFill(0x00ff00, 1);			clipC.graphics.drawCircle(0,0,2);			addChild(clipC);						triangle = new Shape();			addChild(triangle);						center = new Shape();			center.graphics.beginFill(0xff0000);			center.graphics.drawCircle(0,0,2);						addChild(center);						centerline = new Shape();			addChild(centerline);			centerline.x = 0;			centerline.y = 0;						setMarkers();		}				public function get valueA():Number{			return _valueA;		}		public function set valueA(value:Number):void{			value = Math.max(value, 10);			value = Math.min(value, 150);			_valueA = value;			setMarkers();		}				public function get valueB():Number{			return _valueB;		}		public function set valueB(value:Number):void{			value = Math.max(value, 10);			value = Math.min(value, 150);			_valueB = value;			setMarkers();		}				public function get valueC():Number{			return _valueC;		}		public function set valueC(value:Number):void{			value = Math.max(value, 10);			value = Math.min(value, 150);			_valueC = value;			setMarkers();		}						protected function setMarkers():void{			// 0.866025 = cos(30 degrees)			// 0.5 = sin(30 degrees)						clipA.x = 0.866025 * valueA * -1;			clipA.y = 0.5 * valueA * -1;						clipB.x = 0.866025 * valueB;			clipB.y = 0.5 * valueB * -1;					clipC.x = 0;			clipC.y = valueC;								triangle.graphics.clear();			triangle.graphics.lineStyle(0,0x000000);			triangle.graphics.moveTo(clipA.x, clipA.y);			triangle.graphics.lineTo(clipB.x, clipB.y);			triangle.graphics.lineTo(clipC.x, clipC.y);			triangle.graphics.lineTo(clipA.x, clipA.y);						aTF.text = Math.round(valueA).toString();			bTF.text = Math.round(valueB).toString();			cTF.text = Math.round(valueC).toString();						setCenter();		}				protected function setCenter():void{			var ax:Number = clipA.x;			var ay:Number = clipA.y;			var bx:Number = clipB.x;			var by:Number = clipB.y;			var cx:Number = clipC.x;			var cy:Number = clipC.y;			// formula to calculate circumcenter			var d:Number = 2*(ax*(by-cy)+bx*(cy-ay)+cx*(ay-by));			var ux:Number = ((Math.pow(ax,2)+Math.pow(ay,2))*(by-cy)+(Math.pow(bx,2)+Math.pow(by,2))*(cy-ay)+(Math.pow(cx,2)+Math.pow(cy,2))*(ay-by))/d;						var uy:Number = ((Math.pow(ax,2)+Math.pow(ay,2))*(cx-bx)+(Math.pow(bx,2)+Math.pow(by,2))*(ax-cx)+(Math.pow(cx,2)+Math.pow(cy,2))*(bx-ax))/d;			var radius:Number = Math.sqrt(Math.pow(ux,2) + Math.pow(uy,2));									center.x = ux;			center.y = uy;						centerline.graphics.clear();			centerline.graphics.lineStyle(0,0x000000);			centerline.graphics.lineTo(ux, uy);												if (radius < 40){					bubble.x = ux;				bubble.y = uy;			}			else{				var ratio:Number = 40/radius;				bubble.x = ux * ratio;				bubble.y = uy * ratio;			}		}			}}